# for run
# uvicorn fastapiTest:app --reload
# uvicorn fastapiTest:app --port 3000

from fastapi import FastAPI, Response, Request
from fastapi.responses import HTMLResponse
from fastapi.responses import RedirectResponse
from fastapi.templating import Jinja2Templates

app = FastAPI()

items = [1, 2, 3]


templates = Jinja2Templates(directory="html")

@app.get("/")
async def root():
    return items


@app.get("/html-custom", response_class=HTMLResponse)
async def read_items():
    return """
    <html>
        <head>
            <title>Python TestServer Page</title>
        </head>
        <body>
            <h1>Python TestServer Page</h1>
        </body>
    </html>
    """

# response_status = 307 Temporary redirect
@app.get("/redirect", response_class=RedirectResponse)
async def redirect_fastapi():
    return "http://localhost:3000/html"

@app.get('/html')
def index(request: Request):
    return templates.TemplateResponse("index.html", {"request": request})

